<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>James Santos</title>
        <meta name="description" content="Personal site of James Santos">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="assets/landing.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <h1 class="hello">
            <span class="text-wrapper">
                <span class="line line1 blinking"></span>
                <span class="letters letters1">Hi!</span>
            </span>
            <span class="text-wrapper">
                <span class="line line2"></span>
                <span class="letters letters2">I'm James</span>
            </span>
            <span class="text-wrapper">
                <span class="line line3"></span>
                <span class="letters letters3">I blog about</span>
            </span>
            <span class="text-wrapper">
                <span class="line line4"></span>
                <span class="letters letters4">distributed systems</span>
            </span>
            <span class="text-wrapper">
                <span class="line line5"></span>
                <span class="letters letters5">and random stuffs.</span>
            </span>
        </h1>
          
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
        <script>
            var elements = document.querySelectorAll('.hello .letters1');
            Array.prototype.forEach.call(elements, function(el, i){
                el.innerHTML = el.textContent.replace(/([^\x00-\x80]|\w|\!|\')/g, "<span class='letter'>$&</span>");
            });

            var elements = document.querySelectorAll('.hello .letters2');
            Array.prototype.forEach.call(elements, function(el, i){
                el.innerHTML = el.textContent.replace(/([^\x00-\x80]|\w|\!|\')/g, "<span class='letter'>$&</span>");
            });

            var elements = document.querySelectorAll('.hello .letters3');
            Array.prototype.forEach.call(elements, function(el, i){
                el.innerHTML = el.textContent.replace(/([^\x00-\x80]|\w|\!|\')/g, "<span class='letter'>$&</span>");
            });

            var elements = document.querySelectorAll('.hello .letters4');
            Array.prototype.forEach.call(elements, function(el, i){
                el.innerHTML = el.textContent.replace(/([^\x00-\x80]|\w|\!|\')/g, "<span class='letter'>$&</span>");
            });

            var elements = document.querySelectorAll('.hello .letters5');
            Array.prototype.forEach.call(elements, function(el, i){
                el.innerHTML = el.textContent.replace(/([^\x00-\x80]|\w|\!|\.)/g, "<span class='letter'>$&</span>");
            });

            var letters1 = document.querySelector('.hello .letters1')
            var letters2 = document.querySelector('.hello .letters2');
            var letters3 = document.querySelector('.hello .letters3');
            var letters4 = document.querySelector('.hello .letters4');
            var letters5 = document.querySelector('.hello .letters5');

            function hi() {
                var line = document.querySelector('.hello .line1');
                line.classList.remove('blinking');

                var text = anime.timeline({loop: false})
                .add({
                    targets: '.hello .line1',
                    translateX: [0,letters1.offsetWidth],
                    easing: "linear",
                    duration: 150
                })
                .add({
                    targets: '.letters1 .letter',
                    opacity: [0,1],
                    easing: "easeOutExpo",
                    duration: 100,
                    offset: '-=' + letters1.offsetWidth,
                    delay: function(el, i) {
                        return 25 * (i+1)
                    }
                });
                
                return text.children[text.children.length - 2].finished;
            }

            function me() {
                var line = document.querySelector('.hello .line1');
                line.classList.add('blinking');

                var text = anime.timeline({loop: false})
                .add({
                    targets: '.hello .line1',
                    opacity: [1,0.0],
                    easing: "easeOutExpo",
                    duration: 10,
                    delay: 1250
                })
                .add({
                    targets: '.hello .line2',
                    opacity: [0.0,1],
                    duration: 10,
                    delay: 100
                })
                .add({
                    targets: '.hello .line2',
                    translateX: [0,letters2.offsetWidth],
                    easing: "linear",
                    duration: 250,
                    delay: 100
                })
                .add({
                    targets: '.letters2 .letter',
                    opacity: [0,1],
                    easing: "easeOutExpo",
                    duration: 200,
                    offset: '-=' + letters2.offsetWidth,
                    delay: function(el, i) {
                        return 25 * (i+1)
                    }
                });

                return text.children[text.children.length - 2].finished;
            }

            function blog() {
                var line = document.querySelector('.hello .line2');
                line.classList.add('blinking');

                var text = anime.timeline({loop: false})
                .add({
                    targets: '.hello .line2',
                    opacity: [1,0.0],
                    easing: "easeOutExpo",
                    duration: 10,
                    delay: 1000
                })
                .add({
                    targets: '.hello .line3',
                    opacity: [0.0,1],
                    duration: 10,
                    delay: 100
                })
                .add({
                    targets: '.hello .line3',
                    translateX: [0,letters3.offsetWidth],
                    easing: "linear",
                    duration: 250,
                    delay: 100
                })
                .add({
                    targets: '.letters3 .letter',
                    opacity: [0,1],
                    easing: "easeOutExpo",
                    duration: 200,
                    offset: '-=' + letters3.offsetWidth,
                    delay: function(el, i) {
                        return 25 * (i+1)
                    }
                });

                return text.children[text.children.length - 2].finished;
            }

            function topic() {
                var text = anime.timeline({loop: false})
                .add({
                    targets: '.hello .line3',
                    opacity: [1,0.0],
                    easing: "easeOutExpo",
                    duration: 10,
                    delay: 10
                })
                .add({
                    targets: '.hello .line4',
                    opacity: [0.0,1],
                    duration: 10,
                    delay: 10
                })
                .add({
                    targets: '.hello .line4',
                    translateX: [0,letters4.offsetWidth],
                    easing: "linear",
                    duration: 450,
                    delay: 100
                })
                .add({
                    targets: '.letters4 .letter',
                    opacity: [0,1],
                    easing: "easeOutExpo",
                    duration: 400,
                    offset: '-=' + letters4.offsetWidth,
                    delay: function(el, i) {
                        return 25 * (i+1)
                    }
                });

                return text.children[text.children.length - 2].finished;
            }

            function stayTuned() {
                var line = document.querySelector('.hello .line4');
                line.classList.add('blinking');

                var text = anime.timeline({loop: false})
                .add({
                    targets: '.hello .line4',
                    opacity: [1,0.0],
                    easing: "easeOutExpo",
                    duration: 10,
                    delay: 1250
                })
                .add({
                    targets: '.hello .line5',
                    opacity: [0.0,1],
                    duration: 10,
                    delay: 100
                })
                .add({
                    targets: '.hello .line5',
                    translateX: [0,letters5.offsetWidth],
                    easing: "linear",
                    duration: 450,
                    delay: 100
                })
                .add({
                    targets: '.letters5 .letter',
                    opacity: [0,1],
                    easing: "easeOutExpo",
                    duration: 400,
                    offset: '-=' + letters5.offsetWidth,
                    delay: function(el, i) {
                        return 25 * (i+1)
                    }
                });

                return text.children[text.children.length - 2].finished;
            }

            function final() {
                var line = document.querySelector('.hello .line5');
                line.classList.add('blinking');
            }
            
            setTimeout(() => {
               hi()
                .then(me)
                .then(blog)
                .then(topic)
                .then(stayTuned)
                .then(final);
            }, 1250);
        </script>
    </body>
</html>